<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>TypeChecker Documentation - v0.2.1</title><meta name="description" content="Documentation for TypeChecker Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">TypeChecker Documentation - v0.2.1</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>TypeChecker Documentation - v0.2.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="system-f-œâ-type-checker" class="tsd-anchor-link"><strong>System-F-Œ© Type Checker</strong><a href="#system-f-œâ-type-checker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><em>A higher-kinded polymorphic type system with traits, variants, and recursive types</em></p>
<p><strong>System-F-Œ©</strong> is an experimental, strongly typed type inference and checking engine for exploring advanced type systems. It brings together concepts from functional programming, type theory, and compiler design into a single, extensible library.</p>
<p>Whether you're a type theory enthusiast implementing Œª-calculi, a compiler developer exploring polymorphism and traits, or a beginner curious about how type inference works behind the scenes, this project provides both the theory and practical code to experiment with.</p>
<h2 id="üéØ-what-is-system-f-œâ" class="tsd-anchor-link">üéØ <strong>What is System-F-Œ©?</strong><a href="#üéØ-what-is-system-f-œâ" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>System-F-Œ© extends the classic <strong>System-F</strong> (polymorphic Œª-calculus) with:</p>
<ul>
<li><strong>Higher-kinded types</strong> (types that take types as arguments, like <code>List&lt;t&gt;</code> or <code>Option&lt;a, b&gt;</code>)</li>
<li><strong>Traits/Typeclasses</strong> (interfaces with dictionary-passing resolution, similar to Haskell)</li>
<li><strong>Algebraic data types</strong> (enums/variants with nominal + structural support)</li>
<li><strong>Recursive types</strong> (<code>Œº</code>-types for lists, trees, etc.)</li>
<li><strong>Structural typing</strong> (record/tuple patterns with width subsumption)</li>
<li><strong>Bidirectional type checking</strong> (combines inference and checking for robust results)</li>
</ul>
<p>The system uses a <strong>stateful context</strong> (<code>TypeCheckerState</code>) for all operations, managing environments, meta-variables, and solutions. This makes it suitable for building full compilers or just experimenting with type system ideas.</p>
<h3 id="üéì-key-concepts-beginner-friendly" class="tsd-anchor-link">üéì <strong>Key Concepts (Beginner-Friendly)</strong><a href="#üéì-key-concepts-beginner-friendly" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you're new to advanced type systems, here's a quick glossary:</p>
<table>
<thead>
<tr>
<th>Term</th>
<th>What It Means</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Kind</strong></td>
<td>The &quot;type of a type&quot;</td>
<td><code>*</code> (concrete type) or <code>* ‚Üí *</code> (type constructor like <code>List</code>)</td>
</tr>
<tr>
<td><strong>Polymorphism</strong></td>
<td>One function works for <em>any</em> type</td>
<td><code>Œªx:a. x</code> has type <code>‚àÄa. a ‚Üí a</code></td>
</tr>
<tr>
<td><strong>Type Lambda (Œõ)</strong></td>
<td>A function <em>over types</em></td>
<td><code>ŒõŒ±::*. Œ± ‚Üí Œ±</code> (works for any type <code>Œ±</code>)</td>
</tr>
<tr>
<td><strong>Higher-Kinded</strong></td>
<td>Types that take other types</td>
<td><code>List</code> has kind <code>* ‚Üí *</code> (takes one type parameter)</td>
</tr>
<tr>
<td><strong>Trait</strong></td>
<td>An interface defining methods</td>
<td><code>Eq&lt;Self&gt;</code> requires <code>fn eq(self, other: Self) -&gt; Bool</code></td>
</tr>
<tr>
<td><strong>Dictionary</strong></td>
<td>&quot;Proof&quot; that a type implements a trait</td>
<td>A record of method implementations</td>
</tr>
<tr>
<td><strong>Unification</strong></td>
<td>Making two types &quot;match&quot; by solving unknowns</td>
<td><code>?0 = Int</code>, so <code>?0 ‚Üí Bool = Int ‚Üí Bool</code></td>
</tr>
<tr>
<td><strong>Normalization</strong></td>
<td>Simplifying complex types</td>
<td><code>(Œªt.t‚Üít) Int</code> ‚Üí <code>Int ‚Üí Int</code></td>
</tr>
<tr>
<td><strong>Recursive Type</strong></td>
<td>A type defined in terms of itself</td>
<td><code>ŒºList. &lt;Nil:() | Cons:(Int, List)&gt;</code></td>
</tr>
</tbody>
</table>
<h2 id="üõ†Ô∏è-installation" class="tsd-anchor-link">üõ†Ô∏è <strong>Installation</strong><a href="#üõ†Ô∏è-installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0"># Clone and install</span><br/><span class="hl-1">git</span><span class="hl-2"> </span><span class="hl-3">clone</span><span class="hl-2"> </span><span class="hl-3">https://github.com/yourusername/system-f-omega.git</span><br/><span class="hl-1">cd</span><span class="hl-2"> </span><span class="hl-3">system-f-omega</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">install</span><span class="hl-2">  </span><span class="hl-0"># or npm install</span><br/><br/><span class="hl-0"># Build</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-3">build</span>
</code><button type="button">Copy</button></pre>

<p><strong>Usage</strong>: This is a library, not a CLI. Import functions into your TypeScript/JavaScript project:</p>
<pre><code class="ts"><span class="hl-0">// Using Bun or ES modules</span><br/><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">inferType</span><span class="hl-2">, </span><span class="hl-5">TypeCheckerState</span><span class="hl-2">, </span><span class="hl-5">showType</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

<h2 id="üöÄ-quick-start" class="tsd-anchor-link">üöÄ <strong>Quick Start</strong><a href="#üöÄ-quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="1-create-a-context" class="tsd-anchor-link"><strong>1. Create a Context</strong><a href="#1-create-a-context" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All type checking happens in a <code>TypeCheckerState</code>, which holds your bindings (variables, types, traits) and inference state:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">state</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">termBinding</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">conType</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">arrowType</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">TypeCheckerState</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">showContext</span><span class="hl-2"> </span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Basic context: bind &quot;x&quot; to type &quot;Int -&gt; Int&quot;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">ctx</span><span class="hl-2">: </span><span class="hl-8">TypeCheckerState</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-1">termBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;id&quot;</span><span class="hl-2">, </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)))</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-1">showContext</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">ctx</span><span class="hl-2">));</span><br/><span class="hl-0">/* Output:</span><br/><span class="hl-0">Term: id = (Int ‚Üí Int)</span><br/><span class="hl-0">*/</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-build-terms-ast" class="tsd-anchor-link"><strong>2. Build Terms (AST)</strong><a href="#2-build-terms-ast" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Terms are constructed using <em>constructors</em> that mirror the syntax tree:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">lamTerm</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">varTerm</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">appTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">inferType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">showType</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Œªx:Int. x + 1 (simplified)</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">identity</span><span class="hl-2"> = </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><br/><span class="hl-2">  </span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">app</span><span class="hl-2"> = </span><span class="hl-1">appTerm</span><span class="hl-2">(</span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;id&quot;</span><span class="hl-2">), </span><span class="hl-5">identity</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Type check!</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">result</span><span class="hl-2"> = </span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-5">identity</span><span class="hl-2">);</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-5">result</span><span class="hl-2">.</span><span class="hl-5">ok</span><span class="hl-2">)); </span><br/><span class="hl-0">// Output: (Int ‚Üí Int)</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-inference-checking" class="tsd-anchor-link"><strong>3. Inference &amp; Checking</strong><a href="#3-inference-checking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Infer</strong> the type of a term: <code>inferType(state, term)</code></li>
<li><strong>Check</strong> against an expected type: <code>checkType(state, term, expectedType)</code></li>
<li><strong>Normalize</strong> complex types: <code>normalizeType(state, type)</code></li>
</ul>
<pre><code class="ts"><span class="hl-0">// Check if our identity has the right type</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">checkResult</span><span class="hl-2"> = </span><span class="hl-1">checkType</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-5">identity</span><span class="hl-2">, </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)));</span><br/><span class="hl-4">if</span><span class="hl-2"> (</span><span class="hl-3">&quot;ok&quot;</span><span class="hl-2"> </span><span class="hl-6">in</span><span class="hl-2"> </span><span class="hl-5">checkResult</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;‚úì Type checks:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-5">checkResult</span><span class="hl-2">.</span><span class="hl-5">ok</span><span class="hl-2">.</span><span class="hl-5">type</span><span class="hl-2">));</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="4-pretty-printing" class="tsd-anchor-link"><strong>4. Pretty Printing</strong><a href="#4-pretty-printing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">showType</span><span class="hl-2">, </span><span class="hl-5">showTerm</span><span class="hl-2">, </span><span class="hl-5">showContext</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-1">showTerm</span><span class="hl-2">(</span><span class="hl-5">identity</span><span class="hl-2">)); </span><br/><span class="hl-0">// Œªx:Int.x</span><br/><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-5">result</span><span class="hl-2">.</span><span class="hl-5">ok</span><span class="hl-2">)); </span><br/><span class="hl-0">// (Int ‚Üí Int)</span><br/><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-1">showContext</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">ctx</span><span class="hl-2">)); </span><br/><span class="hl-0">// Term: id = (Int ‚Üí Int)</span>
</code><button type="button">Copy</button></pre>

<h2 id="üìö-core-examples" class="tsd-anchor-link">üìö <strong>Core Examples</strong><a href="#üìö-core-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These show progressive complexity, from basic functions to full polymorphic traits.</p>
<h3 id="example-1-polymorphic-identity-system-f-basics" class="tsd-anchor-link"><strong>Example 1: Polymorphic Identity (System-F Basics)</strong><a href="#example-1-polymorphic-identity-system-f-basics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The classic polymorphic identity function <code>id</code> works for <em>any</em> type:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">tylamTerm</span><span class="hl-2">, </span><span class="hl-5">lamTerm</span><span class="hl-2">, </span><span class="hl-5">varTerm</span><span class="hl-2">, </span><span class="hl-5">varType</span><span class="hl-2">, </span><span class="hl-5">forallType</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">arrowType</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">idPoly</span><span class="hl-2"> = </span><span class="hl-1">tylamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">,           </span><span class="hl-0">// Œõa::*</span><br/><span class="hl-2">  </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">),                      </span><span class="hl-0">// Œªx:a.</span><br/><span class="hl-2">    </span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">)                                  </span><span class="hl-0">//   x</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Inferred type: ‚àÄa::*. (a ‚Üí a)</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Identity type:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-1">state</span><span class="hl-2">(), </span><span class="hl-5">idPoly</span><span class="hl-2">).</span><span class="hl-5">ok</span><span class="hl-2">));</span><br/><br/><span class="hl-0">// Apply to concrete type: id [Int]</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">idInt</span><span class="hl-2"> = </span><span class="hl-1">tyappTerm</span><span class="hl-2">(</span><span class="hl-5">idPoly</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">));</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Specialized:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-1">state</span><span class="hl-2">(), </span><span class="hl-5">idInt</span><span class="hl-2">).</span><span class="hl-5">ok</span><span class="hl-2">)); </span><br/><span class="hl-0">// (Int ‚Üí Int)</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-2-higher-kinded-types-type-operators" class="tsd-anchor-link"><strong>Example 2: Higher-Kinded Types (Type Operators)</strong><a href="#example-2-higher-kinded-types-type-operators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define a type constructor <code>Box</code> that wraps any type:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">lamType</span><span class="hl-2">, </span><span class="hl-5">appType</span><span class="hl-2">, </span><span class="hl-5">normalizeType</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">Box</span><span class="hl-2"> = </span><span class="hl-1">lamType</span><span class="hl-2">(</span><span class="hl-3">&quot;t&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">,                 </span><span class="hl-0">// Œªt::*. </span><br/><span class="hl-2">  </span><span class="hl-1">recordType</span><span class="hl-2">([[</span><span class="hl-3">&quot;value&quot;</span><span class="hl-2">, </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;t&quot;</span><span class="hl-2">)]])            </span><span class="hl-0">// { value: t }</span><br/><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Box&lt;Int&gt; normalizes to { value: Int }</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">boxedInt</span><span class="hl-2"> = </span><span class="hl-1">normalizeType</span><span class="hl-2">(</span><span class="hl-1">state</span><span class="hl-2">(), </span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-5">Box</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)));</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Boxed Int:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-5">boxedInt</span><span class="hl-2">));</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-3-enums-pattern-matching" class="tsd-anchor-link"><strong>Example 3: Enums &amp; Pattern Matching</strong><a href="#example-3-enums-pattern-matching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define a nominal enum <code>Result</code> and pattern match on it:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">enumDefBinding</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">appType</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">injectTerm</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">conTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">matchTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">varPattern</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">wildcardPattern</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">inferType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">showType</span><span class="hl-2"> </span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">resultEnum</span><span class="hl-2"> = </span><span class="hl-1">enumDefBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Result&quot;</span><span class="hl-2">, { </span><span class="hl-5">arrow:</span><span class="hl-2"> { </span><span class="hl-5">from:</span><span class="hl-2"> </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">to:</span><span class="hl-2"> </span><span class="hl-5">starKind</span><span class="hl-2"> } }, [</span><span class="hl-3">&quot;E&quot;</span><span class="hl-2">], [</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;Ok&quot;</span><span class="hl-2">, </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;E&quot;</span><span class="hl-2">)],</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;Err&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;String&quot;</span><span class="hl-2">)]</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">ctx</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([</span><span class="hl-5">resultEnum</span><span class="hl-2">]);</span><br/><br/><span class="hl-0">// &lt;Ok = 42&gt; as Result&lt;Int&gt;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">okValue</span><span class="hl-2"> = </span><span class="hl-1">injectTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;Ok&quot;</span><span class="hl-2">, </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;42&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)), </span><br/><span class="hl-2">  </span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Result&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">))</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Pattern match</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">matcher</span><span class="hl-2"> = </span><span class="hl-1">matchTerm</span><span class="hl-2">(</span><span class="hl-5">okValue</span><span class="hl-2">, [</span><br/><span class="hl-2">  [</span><span class="hl-1">varPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">), </span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">)],      </span><span class="hl-0">// Ok(x) =&gt; x</span><br/><span class="hl-2">  [</span><span class="hl-1">wildcardPattern</span><span class="hl-2">(), </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;error&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;String&quot;</span><span class="hl-2">))] </span><span class="hl-0">// Err(_) =&gt; &quot;error&quot;</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Match type:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-5">matcher</span><span class="hl-2">).</span><span class="hl-5">ok</span><span class="hl-2">));</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-4-recursive-types-lists" class="tsd-anchor-link"><strong>Example 4: Recursive Types (Lists)</strong><a href="#example-4-recursive-types-lists" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define and use a recursive <code>List</code> type:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">muType</span><span class="hl-2">, </span><span class="hl-5">variantType</span><span class="hl-2">, </span><span class="hl-5">tupleType</span><span class="hl-2">, </span><span class="hl-5">foldTerm</span><span class="hl-2">, </span><span class="hl-5">injectTerm</span><span class="hl-2">, </span><span class="hl-5">unitValue</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">List</span><span class="hl-2"> = </span><span class="hl-1">muType</span><span class="hl-2">(</span><span class="hl-3">&quot;List&quot;</span><span class="hl-2">,                       </span><span class="hl-0">// ŒºList.</span><br/><span class="hl-2">  </span><span class="hl-1">variantType</span><span class="hl-2">([</span><br/><span class="hl-2">    [</span><span class="hl-3">&quot;Nil&quot;</span><span class="hl-2">, </span><span class="hl-5">unitType</span><span class="hl-2">],                            </span><span class="hl-0">// Nil: ()</span><br/><span class="hl-2">    [</span><span class="hl-3">&quot;Cons&quot;</span><span class="hl-2">, </span><span class="hl-1">tupleType</span><span class="hl-2">([</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;List&quot;</span><span class="hl-2">)])] </span><span class="hl-0">// Cons: (Int, List)</span><br/><span class="hl-2">  ])</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Empty list: fold &lt;Nil=()&gt; as List</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">emptyList</span><span class="hl-2"> = </span><span class="hl-1">foldTerm</span><span class="hl-2">(</span><span class="hl-5">List</span><span class="hl-2">, </span><span class="hl-1">injectTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;Nil&quot;</span><span class="hl-2">, </span><span class="hl-5">unitValue</span><span class="hl-2">, </span><span class="hl-5">List</span><span class="hl-2">));</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Empty list type:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-1">state</span><span class="hl-2">(), </span><span class="hl-5">emptyList</span><span class="hl-2">).</span><span class="hl-5">ok</span><span class="hl-2">));</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-5-traits-dictionaries" class="tsd-anchor-link"><strong>Example 5: Traits &amp; Dictionaries</strong><a href="#example-5-traits-dictionaries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define an <code>Eq</code> trait and implement it for <code>Int</code>:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">traitDefBinding</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">dictTerm</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">lamTerm</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">traitImplBinding</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">checkTraitImplementation</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">showType</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">EqTrait</span><span class="hl-2"> = </span><span class="hl-1">traitDefBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Eq&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;Self&quot;</span><span class="hl-2">, { </span><span class="hl-5">arrow:</span><span class="hl-2"> { </span><span class="hl-5">from:</span><span class="hl-2"> </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">to:</span><span class="hl-2"> </span><span class="hl-5">starKind</span><span class="hl-2"> } }, [</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;eq&quot;</span><span class="hl-2">, </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;Self&quot;</span><span class="hl-2">), </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;Self&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Bool&quot;</span><span class="hl-2">)))]</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">eqIntImpl</span><span class="hl-2"> = </span><span class="hl-1">dictTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;Eq&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), [</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;eq&quot;</span><span class="hl-2">, </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><br/><span class="hl-2">    </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;y&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><br/><span class="hl-2">      </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;true&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Bool&quot;</span><span class="hl-2">))))]    </span><span class="hl-0">// Simplified equality</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">ctx</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">EqTrait</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-1">traitImplBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Eq&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-5">eqIntImpl</span><span class="hl-2">)</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-0">// Get the dictionary for Eq&lt;Int&gt;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">dict</span><span class="hl-2"> = </span><span class="hl-1">checkTraitImplementation</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-3">&quot;Eq&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">));</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Eq&lt;Int&gt; dictionary:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-1">inferType</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-5">dict</span><span class="hl-2">.</span><span class="hl-5">ok</span><span class="hl-2">).</span><span class="hl-5">ok</span><span class="hl-2">));</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-6-type-aliases" class="tsd-anchor-link"><strong>Example 6: Type Aliases</strong><a href="#example-6-type-aliases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create shortcuts for complex types:</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">typeAliasBinding</span><span class="hl-2">, </span><span class="hl-5">normalizeType</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">PairAlias</span><span class="hl-2"> = </span><span class="hl-1">typeAliasBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Pair&quot;</span><span class="hl-2">, [</span><span class="hl-3">&quot;A&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;B&quot;</span><span class="hl-2">], [</span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">], </span><br/><span class="hl-2">  </span><span class="hl-1">tupleType</span><span class="hl-2">([</span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;A&quot;</span><span class="hl-2">), </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;B&quot;</span><span class="hl-2">)])</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">ctx</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([</span><span class="hl-5">PairAlias</span><span class="hl-2">]);</span><br/><br/><span class="hl-0">// Pair&lt;Int, String&gt; expands to (Int, String)</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">pairType</span><span class="hl-2"> = </span><span class="hl-1">normalizeType</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">, </span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Pair&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;String&quot;</span><span class="hl-2">)));</span><br/><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-3">&quot;Pair type:&quot;</span><span class="hl-2">, </span><span class="hl-1">showType</span><span class="hl-2">(</span><span class="hl-5">pairType</span><span class="hl-2">));  </span><span class="hl-0">// (Int, String)</span>
</code><button type="button">Copy</button></pre>

<h2 id="üîß-core-api-reference" class="tsd-anchor-link">üîß <strong>Core API Reference</strong><a href="#üîß-core-api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The library revolves around a <strong>stateful context</strong> (<code>TypeCheckerState</code>) passed to all major functions.</p>
<h3 id="creating-state" class="tsd-anchor-link"><strong>Creating State</strong><a href="#creating-state" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">state</span><span class="hl-2">, </span><span class="hl-5">TypeCheckerState</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Empty state</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">emptyState</span><span class="hl-2">: </span><span class="hl-8">TypeCheckerState</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([]);</span><br/><br/><span class="hl-0">// With bindings</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">ctx</span><span class="hl-2">: </span><span class="hl-8">TypeCheckerState</span><span class="hl-2"> = </span><span class="hl-1">state</span><span class="hl-2">([</span><span class="hl-1">termBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">))]);</span>
</code><button type="button">Copy</button></pre>

<h3 id="essential-functions" class="tsd-anchor-link"><strong>Essential Functions</strong><a href="#essential-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>inferType(state, term)</code></strong></td>
<td>Infers the type of a term</td>
<td><code>Result&lt;TypingError, Type&gt;</code></td>
</tr>
<tr>
<td><strong><code>checkType(state, term, expected)</code></strong></td>
<td>Checks term against expected type</td>
<td><code>Result&lt;TypingError, {type: Type, subst: Map}&gt;</code></td>
</tr>
<tr>
<td><strong><code>normalizeType(state, ty)</code></strong></td>
<td>Œ≤-reduces &amp; expands types</td>
<td><code>Type</code></td>
</tr>
<tr>
<td><strong><code>unifyTypes(state, t1, t2, worklist, subst)</code></strong></td>
<td>Unifies two types (mutates substitution)</td>
<td><code>Result&lt;TypingError, null&gt;</code></td>
</tr>
<tr>
<td><strong><code>subsumes(state, general, specific, ...)</code></strong></td>
<td>Checks subtyping</td>
<td><code>Result&lt;TypingError, null&gt;</code></td>
</tr>
<tr>
<td><strong><code>checkKind(state, ty)</code></strong></td>
<td>Infers/validates type kind</td>
<td><code>Result&lt;TypingError, Kind&gt;</code></td>
</tr>
<tr>
<td><strong><code>checkTraitImplementation(state, trait, ty)</code></strong></td>
<td>Resolves trait dictionary</td>
<td><code>Result&lt;TypingError, Term&gt;</code></td>
</tr>
<tr>
<td><strong><code>freshMetaVar(state)</code></strong></td>
<td>Creates fresh type variable (<code>?N</code>)</td>
<td><code>MetaType</code></td>
</tr>
<tr>
<td><strong><code>showType(ty)</code></strong>, <strong><code>showTerm(t)</code></strong>, <strong><code>showContext(bindings)</code></strong></td>
<td>Pretty printing</td>
<td><code>string</code></td>
</tr>
</tbody>
</table>
<h3 id="term-constructors-building-asts" class="tsd-anchor-link"><strong>Term Constructors</strong> (Building ASTs)<a href="#term-constructors-building-asts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-0">// Basics</span><br/><span class="hl-2">  </span><span class="hl-5">varTerm</span><span class="hl-2">, </span><span class="hl-5">lamTerm</span><span class="hl-2">, </span><span class="hl-5">appTerm</span><span class="hl-2">, </span><span class="hl-5">conTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Polymorphism</span><br/><span class="hl-2">  </span><span class="hl-5">tylamTerm</span><span class="hl-2">, </span><span class="hl-5">tyappTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Data structures</span><br/><span class="hl-2">  </span><span class="hl-5">recordTerm</span><span class="hl-2">, </span><span class="hl-5">injectTerm</span><span class="hl-2">, </span><span class="hl-5">matchTerm</span><span class="hl-2">, </span><span class="hl-5">tupleTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Recursion</span><br/><span class="hl-2">  </span><span class="hl-5">foldTerm</span><span class="hl-2">, </span><span class="hl-5">unfoldTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Traits</span><br/><span class="hl-2">  </span><span class="hl-5">dictTerm</span><span class="hl-2">, </span><span class="hl-5">traitLamTerm</span><span class="hl-2">, </span><span class="hl-5">traitAppTerm</span><span class="hl-2">, </span><span class="hl-5">traitMethodTerm</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Control</span><br/><span class="hl-2">  </span><span class="hl-5">letTerm</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// Examples:</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">lambda</span><span class="hl-2"> = </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">));</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">poly</span><span class="hl-2"> = </span><span class="hl-1">tylamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">lambda</span><span class="hl-2">);</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">application</span><span class="hl-2"> = </span><span class="hl-1">appTerm</span><span class="hl-2">(</span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;f&quot;</span><span class="hl-2">), </span><span class="hl-1">varTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">));</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">recordVal</span><span class="hl-2"> = </span><span class="hl-1">recordTerm</span><span class="hl-2">([[</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;1&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">))]]);</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">variant</span><span class="hl-2"> = </span><span class="hl-1">injectTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;Some&quot;</span><span class="hl-2">, </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;42&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)), </span><br/><span class="hl-2">  </span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Option&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)));</span>
</code><button type="button">Copy</button></pre>

<h3 id="type-constructors" class="tsd-anchor-link"><strong>Type Constructors</strong><a href="#type-constructors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-0">// Basics</span><br/><span class="hl-2">  </span><span class="hl-5">varType</span><span class="hl-2">, </span><span class="hl-5">arrowType</span><span class="hl-2">, </span><span class="hl-5">conType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Polymorphism</span><br/><span class="hl-2">  </span><span class="hl-5">forallType</span><span class="hl-2">, </span><span class="hl-5">lamType</span><span class="hl-2">, </span><span class="hl-5">appType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Data</span><br/><span class="hl-2">  </span><span class="hl-5">recordType</span><span class="hl-2">, </span><span class="hl-5">variantType</span><span class="hl-2">, </span><span class="hl-5">tupleType</span><span class="hl-2">, </span><span class="hl-5">muType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Traits  </span><br/><span class="hl-2">  </span><span class="hl-5">boundedForallType</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">// Kinds</span><br/><span class="hl-2">  </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-5">arrowKind</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">intToBool</span><span class="hl-2"> = </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Bool&quot;</span><span class="hl-2">));</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">polyFun</span><span class="hl-2"> = </span><span class="hl-1">forallType</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">, </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">), </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">)));</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">listTy</span><span class="hl-2"> = </span><span class="hl-1">muType</span><span class="hl-2">(</span><span class="hl-3">&quot;L&quot;</span><span class="hl-2">, </span><span class="hl-1">variantType</span><span class="hl-2">([</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;Nil&quot;</span><span class="hl-2">, </span><span class="hl-1">tupleType</span><span class="hl-2">([])],</span><br/><span class="hl-2">  [</span><span class="hl-3">&quot;Cons&quot;</span><span class="hl-2">, </span><span class="hl-1">tupleType</span><span class="hl-2">([</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;L&quot;</span><span class="hl-2">)])]</span><br/><span class="hl-2">]));</span>
</code><button type="button">Copy</button></pre>

<h3 id="bindings-context-entries" class="tsd-anchor-link"><strong>Bindings</strong> (Context Entries)<a href="#bindings-context-entries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">termBinding</span><span class="hl-2">, </span><span class="hl-5">typeBinding</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">traitDefBinding</span><span class="hl-2">, </span><span class="hl-5">traitImplBinding</span><span class="hl-2">, </span><span class="hl-5">dictBinding</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">enumDefBinding</span><span class="hl-2">, </span><span class="hl-5">typeAliasBinding</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">bindings</span><span class="hl-2"> = [</span><br/><span class="hl-2">  </span><span class="hl-0">// Variable binding</span><br/><span class="hl-2">  </span><span class="hl-1">termBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">)),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Type variable (kind)</span><br/><span class="hl-2">  </span><span class="hl-1">typeBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Alpha&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Type alias</span><br/><span class="hl-2">  </span><span class="hl-1">typeAliasBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Result&quot;</span><span class="hl-2">, [</span><span class="hl-3">&quot;T&quot;</span><span class="hl-2">], [</span><span class="hl-5">starKind</span><span class="hl-2">], </span><br/><span class="hl-2">    </span><span class="hl-1">appType</span><span class="hl-2">(</span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Option&quot;</span><span class="hl-2">), </span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;T&quot;</span><span class="hl-2">))),</span><br/><span class="hl-2">    </span><br/><span class="hl-2">  </span><span class="hl-0">// Enum definition</span><br/><span class="hl-2">  </span><span class="hl-1">enumDefBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Color&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">, [], [</span><br/><span class="hl-2">    [</span><span class="hl-3">&quot;Red&quot;</span><span class="hl-2">, </span><span class="hl-5">unitType</span><span class="hl-2">], [</span><span class="hl-3">&quot;Blue&quot;</span><span class="hl-2">, </span><span class="hl-5">unitType</span><span class="hl-2">]</span><br/><span class="hl-2">  ]),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Trait definition</span><br/><span class="hl-2">  </span><span class="hl-1">traitDefBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Show&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;T&quot;</span><span class="hl-2">, </span><span class="hl-5">starKind</span><span class="hl-2">, [</span><br/><span class="hl-2">    [</span><span class="hl-3">&quot;show&quot;</span><span class="hl-2">, </span><span class="hl-1">arrowType</span><span class="hl-2">(</span><span class="hl-1">varType</span><span class="hl-2">(</span><span class="hl-3">&quot;T&quot;</span><span class="hl-2">), </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;String&quot;</span><span class="hl-2">))]</span><br/><span class="hl-2">  ]),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Trait implementation (dictionary)</span><br/><span class="hl-2">  </span><span class="hl-1">traitImplBinding</span><span class="hl-2">(</span><span class="hl-3">&quot;Show&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><br/><span class="hl-2">    </span><span class="hl-1">dictTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;Show&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), [</span><br/><span class="hl-2">      [</span><span class="hl-3">&quot;show&quot;</span><span class="hl-2">, </span><span class="hl-1">lamTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;n&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;Int&quot;</span><span class="hl-2">), </span><span class="hl-1">conTerm</span><span class="hl-2">(</span><span class="hl-3">&quot;n.toString&quot;</span><span class="hl-2">, </span><span class="hl-1">conType</span><span class="hl-2">(</span><span class="hl-3">&quot;String&quot;</span><span class="hl-2">)))]</span><br/><span class="hl-2">    ]))</span><br/><span class="hl-2">];</span>
</code><button type="button">Copy</button></pre>

<h3 id="pattern-matching" class="tsd-anchor-link"><strong>Pattern Matching</strong><a href="#pattern-matching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">varPattern</span><span class="hl-2">, </span><span class="hl-5">wildcardPattern</span><span class="hl-2">, </span><br/><span class="hl-2">  </span><span class="hl-5">recordPattern</span><span class="hl-2">, </span><span class="hl-5">variantPattern</span><span class="hl-2">, </span><span class="hl-5">tuplePattern</span><br/><span class="hl-2">} </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./src/typechecker.js&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">patterns</span><span class="hl-2"> = [</span><br/><span class="hl-2">  </span><span class="hl-1">varPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;x&quot;</span><span class="hl-2">),                    </span><span class="hl-0">// binds whole value to x</span><br/><span class="hl-2">  </span><span class="hl-1">wildcardPattern</span><span class="hl-2">(),                  </span><span class="hl-0">// matches anything, no binding</span><br/><span class="hl-2">  </span><span class="hl-1">recordPattern</span><span class="hl-2">([[</span><span class="hl-3">&quot;first&quot;</span><span class="hl-2">, </span><span class="hl-1">varPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;a&quot;</span><span class="hl-2">)], [</span><span class="hl-3">&quot;rest&quot;</span><span class="hl-2">, </span><span class="hl-1">wildcardPattern</span><span class="hl-2">()]]),</span><br/><span class="hl-2">  </span><span class="hl-1">variantPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;Cons&quot;</span><span class="hl-2">, </span><span class="hl-1">tuplePattern</span><span class="hl-2">([</span><span class="hl-1">varPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;hd&quot;</span><span class="hl-2">), </span><span class="hl-1">varPattern</span><span class="hl-2">(</span><span class="hl-3">&quot;tl&quot;</span><span class="hl-2">)])),</span><br/><span class="hl-2">];</span>
</code><button type="button">Copy</button></pre>

<h3 id="error-handling" class="tsd-anchor-link"><strong>Error Handling</strong><a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All functions return <code>Result&lt;TypingError, T&gt;</code>, where errors are structured:</p>
<pre><code class="ts"><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-8">TypingError</span><span class="hl-2"> = </span><br/><span class="hl-2">  | { </span><span class="hl-5">unbound</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2"> }                    </span><span class="hl-0">// Undefined variable/type</span><br/><span class="hl-2">  | { </span><span class="hl-5">type_mismatch</span><span class="hl-2">: { </span><span class="hl-5">expected</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2">, </span><span class="hl-5">actual</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2"> } }</span><br/><span class="hl-2">  | { </span><span class="hl-5">kind_mismatch</span><span class="hl-2">: { </span><span class="hl-5">expected</span><span class="hl-2">: </span><span class="hl-8">Kind</span><span class="hl-2">, </span><span class="hl-5">actual</span><span class="hl-2">: </span><span class="hl-8">Kind</span><span class="hl-2"> } }</span><br/><span class="hl-2">  | { </span><span class="hl-5">not_a_function</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2"> }               </span><span class="hl-0">// Applied non-function</span><br/><span class="hl-2">  | { </span><span class="hl-5">missing_trait_impl</span><span class="hl-2">: { </span><span class="hl-5">trait</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2">, </span><span class="hl-5">type</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2"> } }</span><br/><span class="hl-2">  | { </span><span class="hl-5">cyclic</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2"> }                     </span><span class="hl-0">// Infinite type</span><br/><span class="hl-2">  | { </span><span class="hl-5">missing_case</span><span class="hl-2">: { </span><span class="hl-5">label</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2"> } }    </span><span class="hl-0">// Incomplete pattern match</span><br/><span class="hl-2">  | { </span><span class="hl-5">invalid_variant_label</span><span class="hl-2">: { </span><span class="hl-5">variant</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2">, </span><span class="hl-5">label</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2"> } }</span><br/><span class="hl-2">  | { </span><span class="hl-5">missing_field</span><span class="hl-2">: { </span><span class="hl-5">record</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2">, </span><span class="hl-5">label</span><span class="hl-2">: </span><span class="hl-8">string</span><span class="hl-2"> } }</span><br/><span class="hl-2">  | { </span><span class="hl-5">not_a_variant</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2"> }</span><br/><span class="hl-2">  | { </span><span class="hl-5">not_a_record</span><span class="hl-2">: </span><span class="hl-8">Type</span><span class="hl-2"> }</span><br/><span class="hl-2">  | { </span><span class="hl-5">wrong_number_of_dicts</span><span class="hl-2">: { </span><span class="hl-5">expected</span><span class="hl-2">: </span><span class="hl-8">number</span><span class="hl-2">, </span><span class="hl-5">actual</span><span class="hl-2">: </span><span class="hl-8">number</span><span class="hl-2"> } };</span><br/><span class="hl-2">  </span><span class="hl-0">// ... more</span>
</code><button type="button">Copy</button></pre>

<h2 id="üß™-testing-examples" class="tsd-anchor-link">üß™ <strong>Testing &amp; Examples</strong><a href="#üß™-testing-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>examples/</code> folder contains self-contained files:</p>
<pre><code class="bash"><span class="hl-0"># Run individual examples</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-3">examples/polymorphic.ts</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-3">examples/traits.ts</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-3">examples/enums.ts</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-3">examples/recursion.ts</span>
</code><button type="button">Copy</button></pre>

<p>The <code>tests/</code> folder has ~5000+ lines of unit tests covering:</p>
<ul>
<li>Unification edge cases</li>
<li>Higher-kinded polymorphism</li>
<li>Trait resolution</li>
<li>Recursive type normalization</li>
<li>Pattern matching exhaustiveness</li>
<li>Kind inference</li>
</ul>
<p>Run tests with:</p>
<pre><code class="bash"><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">test</span>
</code><button type="button">Copy</button></pre>

<h2 id="üéì-for-type-theory-enthusiasts" class="tsd-anchor-link">üéì <strong>For Type Theory Enthusiasts</strong><a href="#üéì-for-type-theory-enthusiasts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="formal-judgment-forms" class="tsd-anchor-link"><strong>Formal Judgment Forms</strong><a href="#formal-judgment-forms" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Kinding</strong> (types well-formed under Œì):</p>
<pre><code><span class="hl-7">Œì</span><span class="hl-2"> ‚ä¢ </span><span class="hl-9">œÑ</span><span class="hl-2"> : </span><span class="hl-5">Œ∫</span>
</code><button>Copy</button></pre>

<p><strong>Subtyping</strong>:</p>
<pre><code><span class="hl-7">Œì</span><span class="hl-2"> ‚ä¢ </span><span class="hl-5">œÑ</span><span class="hl-2">‚ÇÅ &lt;: </span><span class="hl-5">œÑ</span><span class="hl-2">‚ÇÇ</span>
</code><button>Copy</button></pre>

<p><strong>Type Inference</strong> (synthesis):</p>
<pre><code><span class="hl-7">Œì</span><span class="hl-2"> ‚ä¢ </span><span class="hl-5">e</span><span class="hl-2"> ‚áí </span><span class="hl-5">œÑ</span>
</code><button>Copy</button></pre>

<p><strong>Type Checking</strong> (analysis):</p>
<pre><code><span class="hl-7">Œì</span><span class="hl-2"> ‚ä¢ </span><span class="hl-5">e</span><span class="hl-2"> ‚áê </span><span class="hl-5">œÑ</span>
</code><button>Copy</button></pre>

<p><strong>Unification</strong> (constraint solving):</p>
<pre><code><span class="hl-7">Œì</span><span class="hl-2">; </span><span class="hl-5">œÉ</span><span class="hl-2"> ‚ä¢ </span><span class="hl-5">œÑ</span><span class="hl-2">‚ÇÅ = </span><span class="hl-5">œÑ</span><span class="hl-2">‚ÇÇ</span>
</code><button>Copy</button></pre>

<h3 id="key-implementation-decisions" class="tsd-anchor-link"><strong>Key Implementation Decisions</strong><a href="#key-implementation-decisions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Stateful Meta-Variables</strong>: All inference uses <code>MetaEnv</code> with <code>freshMetaVar()</code> for unknowns</li>
<li><strong>Bidirectional Architecture</strong>: <code>inferType</code> uses synthesis; <code>checkType</code> handles checking</li>
<li><strong>Worklist Constraint Solver</strong>: Defers unification decisions via <code>solveConstraints()</code></li>
<li><strong>Nominal + Structural</strong>: Enums are nominal, but records/variants support structural subtyping</li>
<li><strong>Dictionary Passing</strong>: Traits resolved via explicit dictionaries, no implicit parameters</li>
</ol>
<h3 id="research-connections" class="tsd-anchor-link"><strong>Research Connections</strong><a href="#research-connections" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>System F&lt;:</strong> The polymorphic core (Girard/Reynolds)</li>
<li><strong>Fœâ</strong>: Higher-kinded extension (Harper/Stone)</li>
<li><strong>MLF</strong>: Let-polymorphism (not yet: future work)</li>
<li><strong>Haskell Typeclasses</strong>: Dictionary-passing model</li>
<li><strong>Rust Traits</strong>: Similar bound resolution, without orphan rules</li>
</ul>
<h2 id="üîÆ-roadmap-planned-features" class="tsd-anchor-link">üîÆ <strong>Roadmap &amp; Planned Features</strong><a href="#üîÆ-roadmap-planned-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="v020-next" class="tsd-anchor-link"><strong>v0.2.0 (Next)</strong><a href="#v020-next" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>[ ] Let-polymorphism (HM-style generalization)</li>
<li>[ ] Type class instances with supertraits</li>
<li>[ ] Associated types in traits</li>
<li>[ ] Better error messages with source locations</li>
</ul>
<h3 id="v100-milestone" class="tsd-anchor-link"><strong>v1.0.0 (Milestone)</strong><a href="#v100-milestone" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>[ ] WASM compilation target</li>
<li>[ ] Full ŒªF (dependent types lite)</li>
<li>[ ] Effect system integration</li>
<li>[ ] Incremental type checking</li>
</ul>
<h3 id="long-term" class="tsd-anchor-link"><strong>Long-term</strong><a href="#long-term" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Dependent types (Œ†-types)</li>
<li>Linear types</li>
<li>Effect rows</li>
<li>Pattern synonyms</li>
<li>Template Haskell-style metaprogramming</li>
</ul>
<h2 id="ü§ù-contributing" class="tsd-anchor-link">ü§ù <strong>Contributing</strong><a href="#ü§ù-contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>Fork &amp; clone</li>
<li><code>bun install</code></li>
<li>Add tests in <code>tests/</code></li>
<li>Run <code>bun test --watch</code></li>
<li>Submit PRs!</li>
</ol>
<p><strong>Good first issues</strong>:</p>
<ul>
<li>More examples (especially traits + HKTs)</li>
<li>Better pretty-printer (handle all edge cases)</li>
<li>Documentation for advanced unification rules</li>
</ul>
<h2 id="üìÑ-license" class="tsd-anchor-link">üìÑ <strong>License</strong><a href="#üìÑ-license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT ¬© 2025 Joshua Tenner. See <a href="media/LICENSE">MIT LICENSE</a>.</p>
<p><strong>Vibe-coded</strong> with assistance from Claude AI. Extensive tests ensure correctness, but type systems are complex ‚Äî bug reports welcome! üêõ</p>
<hr>
<p><em>Special thanks to literally everyone who helped me understand this complicated world of type theory.</em></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#system-f-œâ-type-checker"><span>System-<wbr/>F-<wbr/>Œ© <wbr/>Type <wbr/>Checker</span></a><ul><li><a href="#üéØ-what-is-system-f-œâ"><span>üéØ <wbr/>What is <wbr/>System-<wbr/>F-<wbr/>Œ©?</span></a></li><li><ul><li><a href="#üéì-key-concepts-beginner-friendly"><span>üéì <wbr/>Key <wbr/>Concepts (<wbr/>Beginner-<wbr/>Friendly)</span></a></li></ul></li><li><a href="#üõ†Ô∏è-installation"><span>üõ†Ô∏è <wbr/>Installation</span></a></li><li><a href="#üöÄ-quick-start"><span>üöÄ <wbr/>Quick <wbr/>Start</span></a></li><li><ul><li><a href="#1-create-a-context"><span>1. <wbr/>Create a <wbr/>Context</span></a></li><li><a href="#2-build-terms-ast"><span>2. <wbr/>Build <wbr/>Terms (<wbr/>AST)</span></a></li><li><a href="#3-inference-checking"><span>3. <wbr/>Inference &amp; <wbr/>Checking</span></a></li><li><a href="#4-pretty-printing"><span>4. <wbr/>Pretty <wbr/>Printing</span></a></li></ul></li><li><a href="#üìö-core-examples"><span>üìö <wbr/>Core <wbr/>Examples</span></a></li><li><ul><li><a href="#example-1-polymorphic-identity-system-f-basics"><span>Example 1: <wbr/>Polymorphic <wbr/>Identity (<wbr/>System-<wbr/>F <wbr/>Basics)</span></a></li><li><a href="#example-2-higher-kinded-types-type-operators"><span>Example 2: <wbr/>Higher-<wbr/>Kinded <wbr/>Types (<wbr/>Type <wbr/>Operators)</span></a></li><li><a href="#example-3-enums-pattern-matching"><span>Example 3: <wbr/>Enums &amp; <wbr/>Pattern <wbr/>Matching</span></a></li><li><a href="#example-4-recursive-types-lists"><span>Example 4: <wbr/>Recursive <wbr/>Types (<wbr/>Lists)</span></a></li><li><a href="#example-5-traits-dictionaries"><span>Example 5: <wbr/>Traits &amp; <wbr/>Dictionaries</span></a></li><li><a href="#example-6-type-aliases"><span>Example 6: <wbr/>Type <wbr/>Aliases</span></a></li></ul></li><li><a href="#üîß-core-api-reference"><span>üîß <wbr/>Core <wbr/>API <wbr/>Reference</span></a></li><li><ul><li><a href="#creating-state"><span>Creating <wbr/>State</span></a></li><li><a href="#essential-functions"><span>Essential <wbr/>Functions</span></a></li><li><a href="#term-constructors-building-asts"><span>Term <wbr/>Constructors (<wbr/>Building <wbr/>AS<wbr/>Ts)</span></a></li><li><a href="#type-constructors"><span>Type <wbr/>Constructors</span></a></li><li><a href="#bindings-context-entries"><span>Bindings (<wbr/>Context <wbr/>Entries)</span></a></li><li><a href="#pattern-matching"><span>Pattern <wbr/>Matching</span></a></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li></ul></li><li><a href="#üß™-testing-examples"><span>üß™ <wbr/>Testing &amp; <wbr/>Examples</span></a></li><li><a href="#üéì-for-type-theory-enthusiasts"><span>üéì <wbr/>For <wbr/>Type <wbr/>Theory <wbr/>Enthusiasts</span></a></li><li><ul><li><a href="#formal-judgment-forms"><span>Formal <wbr/>Judgment <wbr/>Forms</span></a></li><li><a href="#key-implementation-decisions"><span>Key <wbr/>Implementation <wbr/>Decisions</span></a></li><li><a href="#research-connections"><span>Research <wbr/>Connections</span></a></li></ul></li><li><a href="#üîÆ-roadmap-planned-features"><span>üîÆ <wbr/>Roadmap &amp; <wbr/>Planned <wbr/>Features</span></a></li><li><ul><li><a href="#v020-next"><span>v0.2.0 (<wbr/>Next)</span></a></li><li><a href="#v100-milestone"><span>v1.0.0 (<wbr/>Milestone)</span></a></li><li><a href="#long-term"><span>Long-<wbr/>term</span></a></li></ul></li><li><a href="#ü§ù-contributing"><span>ü§ù <wbr/>Contributing</span></a></li><li><a href="#üìÑ-license"><span>üìÑ <wbr/>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">TypeChecker Documentation - v0.2.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
